<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta name="description" content="Nodeå‘é€ç”µå­é‚®ä»¶"><meta name="keywords" content="nodemailer,ç”µå­é‚®ä»¶,node.js"><meta name="theme-color" content="#600090"><meta name="msapplication-navbutton-color" content="#600090"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#600090"><meta name="screen-orientation" content="portrait"><meta name="full-screen" content="yes"><meta name="browsermode" content="application"><meta name="x5-orientation" content="portrait"><meta name="x5-fullscreen" content="true"><meta name="x5-page-mode" content="app"><link rel="shortcut icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" title="æ¢¦æƒ³.å®¶" href="/atom.xml"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css"><title>Nodeå‘é€ç”µå­é‚®ä»¶ï½œæ¢¦æƒ³.å®¶</title><link rel="canonical" href="https://www.wuhuan.me/2017/06/20/node-post-mail/"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/blog-style.css"><link rel="stylesheet" href="/css/github.css"><script src="/js/jquery.min.js"></script></head><style>header.intro-header{background-image:url(https://www.wuhuan.me/images/header.jpg)}.toc-wrap .nav>li>a{padding:4px!important;color:#333!important}.toc-wrap .nav>.active:focus>a,.toc-wrap .nav>.active:hover>a,.toc-wrap .nav>.active>a{padding-left:9px!important;font-weight:700;color:#e15059;background-color:transparent;border-left:2px solid #e15059}.container .toc-wrap .toc-level-1>a{font-size:1.5rem!important}.container .toc-wrap .toc-level-2>a{font-size:1.5rem!important}.container .toc-wrap .toc-level-3>a{font-size:1.5rem!important;padding-left:100px}.container .toc-wrap .toc-level-4>a{font-size:1.4rem!important}.container .toc-wrap .toc-level-5>a{font-size:1.4rem!important}.container .toc-wrap .toc-level-6>a{font-size:1.4rem!important}.toc-wrap .toc-link{width:278px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-overflow:ellipsis;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;-moz-binding:url(ellipsis.xml#ellipsis)}body{scroll-behavior:smooth!important;overflow-y:scroll;scroll-behavior:smooth}</style><body ontouchstart="" class="animated fadeIn" data-spy="scroll" data-target=".toc-wrap"><nav class="navbar navbar-default navbar-custom navbar-fixed-top" id="nav-top" data-ispost="true" data-istags="false
" data-ishome="false"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand animated pulse" href="/"><span class="brand-logo">æ¢¦æƒ³.å®¶ </span>'s Blog</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/"><i class="fa fa-home" aria-hidden="true"></i> ä¸»é¡µ</a></li><li><a href="/archives/"><i class="fa fa-archive" aria-hidden="true"></i> å½’æ¡£</a></li><li><a href="/photos/"><i class="fa fa-camera-retro" aria-hidden="true"></i> ç›¸å†Œ</a></li><li><a href="#" class="popup-trigger"><i class="fa fa-search" aria-hidden="true"></i> æœç´¢</a></li></ul></div></div></div></nav><script>function handleMagic(e){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}var $toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic)</script><img class="wechat-title-img" src="https://www.wuhuan.me/images/banner_12.jpg"><style>header.intro-header{background-image:url(https://www.wuhuan.me/images/banner_12.jpg?imageView2/1/w/1400/h/400/interlace/1/q/90)}article li a{word-break:break-all}h1,h2,h3,h4,h5,h6{font-weight:400;margin:20px 0;line-height:1.3}#post-relative-time{color:#f93131;margin:0 5px;font-weight:700}</style><header class="intro-header"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center"><div class="post-heading"><h1>Nodeå‘é€ç”µå­é‚®ä»¶</h1><span class="meta"><span>ä½œè€… æ¢¦æƒ³.å®¶</span> <span>æ—¥æœŸ 2017-06-20 </span><span class="post-count">å­—æ•° 1.6k</span></span><div class="tags text-center"><a class="tag" href="/tags/#nodemailer" title="nodemailer">nodemailer</a> <a class="tag" href="/tags/#ç”µå­é‚®ä»¶" title="ç”µå­é‚®ä»¶">ç”µå­é‚®ä»¶</a> <a class="tag" href="/tags/#node.js" title="node.js">node.js</a></div></div></div></div></div><div class="post-title-haojen"><span>Nodeå‘é€ç”µå­é‚®ä»¶</span></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container"><p>ç”µå­é‚®ä»¶ä½œä¸ºæœ€å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§ç½‘ç»œæœåŠ¡å’Œæˆ‘ä»¬çš„å·¥ä½œå­¦ä¹ ç”Ÿæ´»å·²ç»å¯†ä¸å¯åˆ†ã€‚æ¥å—ä¿¡ç”¨å¡çš„è´¦å•ï¼Œæ³¨å†Œç½‘ç«™ï¼Œæ‰¾å›å¯†ç ç­‰ç­‰éƒ½éœ€è¦ç”¨åˆ°å®ƒã€‚ä»Šå¤©åœ¨å°±æ¥å­¦ä¹ ä¸‹å¦‚ä½•åœ¨nodeä¸‹æ¥å‘é€é‚®ä»¶ï¼Œä¸ºå½“å‰åšçš„é¡¹ç›®æä¾›é‚®ç®±æ ¡éªŒçš„åŠŸèƒ½ã€‚</p><p>é‚®ç®±æ ¡éªŒçš„åŸç†ï¼šå½“æˆ‘ä»¬åœ¨xxxç½‘ç«™æ³¨å†Œçš„æ—¶å€™ï¼Œæ³¨å†Œä¿¡æ¯ä¸­ä¸€èˆ¬éƒ½ä¼šè¦æ±‚ä½ å¡«ä¸€ä¸ªé‚®ç®±ï¼ˆä½œç”¨ï¼š1ã€å½“ç€ç™»å½•çš„ç”¨æˆ·è´¦å·ï¼Œ2ã€æ‰¾å›å¯†ç ï¼‰ï¼Œå½“ä½ æ³¨å†ŒæˆåŠŸåç³»ç»Ÿå°±ä¼šå‘ä½ å¡«å†™çš„é‚®ç®±ä¸­å‘é€ä¸€å°å¸¦æœ‰ç‰¹æ®Šé“¾æ¥çš„é‚®ä»¶ï¼Œè¦æ±‚ä½ æ‰“å¼€ä½ çš„é‚®ä»¶å»ç‚¹å‡»ï¼Œå½“ä½ è¿›å…¥é‚®ç®±ç‚¹å‡»è¿æ¥ç³»ç»Ÿå°±ä¼šæ¥å—åˆ°ä¸€ä¸ªgetè¯·æ±‚ä»è€ŒéªŒè¯é‚®ç®±æ˜¯ä½ æœ¬äººçš„ã€‚</p><p>nodeå‘é€é‚®ä»¶å·²ç»æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„ç»„ä»¶ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨nodemailerè¿™ä¸ªå¸¦ä¸‰æ–¹ç»„ä»¶æ¥å‘é‚®ä»¶ï¼Œå¦‚æœä¸ä½¿ç”¨å°è£…å¥½çš„ç¬¬ä¸‰æ–¹ç»„ä»¶è‡ªå·±å†™çš„è¯éœ€è¦å»ç†Ÿæ‚‰å’Œç ”ç©¶å¤æ‚çš„é‚®ä»¶åè®®æ¥å®ç°ï¼Œå¦‚æœè¦å¼€å‘ä¸€ä¸ªé‚®ä»¶æœåŠ¡é‚£ä¹ˆè¿™æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯ä¸€ä¸ªå°å°çš„é‚®ä»¶éªŒè¯æˆ‘è§‰å¾—è¿™æ˜¯éå¿…è¦çš„ã€‚</p><h2 id="åˆ›å»ºæœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä½¿ç”¨çš„æ•°æ®åº“çš„è¡¨"><a href="#åˆ›å»ºæœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä½¿ç”¨çš„æ•°æ®åº“çš„è¡¨" class="headerlink" title="åˆ›å»ºæœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä½¿ç”¨çš„æ•°æ®åº“çš„è¡¨"></a>åˆ›å»ºæœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä½¿ç”¨çš„æ•°æ®åº“çš„è¡¨</h2><pre><code class="sql">DROP TABLE IF EXISTS `user_info`;
CREATE TABLE `user_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#39;ä¸»é”®&#39;,
  `username` varchar(20) NOT NULL COMMENT &#39;ç”¨æˆ·å&#39;,
  `password` varchar(255) NOT NULL COMMENT &#39;ç”¨æˆ·å¯†ç &#39;,
  `email` varchar(255) NOT NULL COMMENT &#39;é‚®ç®±&#39;,
  `code` varchar(255) NOT NULL COMMENT &#39;é‚®ç®±éªŒè¯ä½¿ç”¨çš„code&#39;,
  `email_state` int(2) NOT NULL COMMENT &#39;é‚®ç®±éªŒè¯çŠ¶æ€ã€‚ 0:æœªéªŒè¯ï¼Œ1:å·²éªŒè¯&#39;,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
</code></pre><p>è¿™å°±æ˜¯æœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä¸­ç”¨åˆ°çš„ç”¨æˆ·ä¿¡æ¯è¡¨ï¼Œå…¶å®è¿˜åº”è¯¥æœ‰ä¸€å¼ è¡¨å­˜æ”¾æ¯æ¬¡å‘é€é‚®ç®±éªŒè¯æ—¶å€™ç”Ÿæˆçš„ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚codeï¼Œè¿‡æœŸæ—¶é—´ç­‰ï¼Œåœ¨è¿™é‡Œæˆ‘å°±ä¸æ ¡éªŒé‚®ä»¶çš„è¿‡æœŸæ—¶é—´äº†ï¼Œcodeä¹Ÿç›´æ¥æ”¾åœ¨ç”¨æˆ·ä¿¡æ¯è¡¨ä¸­äº†ï¼Œå¦‚æœä½ åœ¨æ­£å¼ç³»ç»Ÿä¸­è¯·æ–°å»ºä¸€å¼ è¡¨æˆ–è€…åœ¨ç¼“å­˜ä¸­æ¥å­˜æ”¾æ¯æ¬¡å‘é€é‚®ä»¶ç”Ÿæˆçš„ä¸´æ—¶æ•°æ®ã€‚</p><h2 id="nodemailderä»‹ç»åŠå…¶ä½¿ç”¨"><a href="#nodemailderä»‹ç»åŠå…¶ä½¿ç”¨" class="headerlink" title="nodemailderä»‹ç»åŠå…¶ä½¿ç”¨"></a>nodemailderä»‹ç»åŠå…¶ä½¿ç”¨</h2><h3 id="ç‰¹æ€§åˆ—è¡¨"><a href="#ç‰¹æ€§åˆ—è¡¨" class="headerlink" title="ç‰¹æ€§åˆ—è¡¨"></a>ç‰¹æ€§åˆ—è¡¨</h3><ul><li>ä¸ä¾èµ–äºå…¶å®ƒæ¨¡å—</li><li>æ”¯æŒunicodeç¼–ç ï¼ŒåŒ…æ‹¬emojiè¡¨æƒ…</li><li>æ”¯æŒwindowsç³»ç»Ÿ</li><li>é‚®ä»¶å†…å®¹æ”¯æŒçº¯æ–‡æœ¬å’Œhtml</li><li>æ”¯æŒæ·»åŠ é™„ä»¶</li><li>é‚®ä»¶å†…å®¹å¦‚æœæ˜¯htmlè¿˜å¯ä»¥æ’å…¥å›¾ç‰‡</li><li>æ”¯æŒé™¤äº†é»˜è®¤SMTPåè®®å¤–çš„å…¶å®ƒä¼ è¾“åè®®</li><li>ä½¿ç”¨TLS / STARTTLSå®‰å…¨ç”µå­é‚®ä»¶ä¼ é€’</li><li>SMTPè¿æ¥ä»£ç†</li><li>å¥å…¨çš„oauth2è®¤è¯</li><li>DKIMæ¶ˆæ¯ç­¾å</li><li>è‡ªå®šä¹‰æ’ä»¶æ”¯æŒå¤„ç†æ¶ˆæ¯</li><li>æ”¯æŒes6è¯­æ³•</li></ul><p>è¯¦ç»†æ–‡æ¡£<a href="https://nodemailer.com" rel="external nofollow noopener noreferrer" target="_blank">nodemailerå®˜æ–¹åœ°å€</a></p><h3 id="nodemaileré…ç½®"><a href="#nodemaileré…ç½®" class="headerlink" title="nodemaileré…ç½®"></a>nodemaileré…ç½®</h3><p>é€šè¿‡<code>npm install nodemailer --save</code>å®‰è£…è¿™ä¸ªæ¨¡å—åˆ°é¡¹ç›®ã€‚å½“å‰çš„nodemailerçš„ç‰ˆæœ¬æ˜¯<code>4.0.1</code></p><h3 id="nodemailerä½¿ç”¨"><a href="#nodemailerä½¿ç”¨" class="headerlink" title="nodemailerä½¿ç”¨"></a>nodemailerä½¿ç”¨</h3><p>ä½¿ç”¨nodemailerå‘é€ä¸€å°é‚®ä»¶å¤§æ¦‚éœ€è¦4æ­¥</p><h4 id="1ã€åœ¨æ–‡ä»¶ä¸­å¼•å…¥nodemailer"><a href="#1ã€åœ¨æ–‡ä»¶ä¸­å¼•å…¥nodemailer" class="headerlink" title="1ã€åœ¨æ–‡ä»¶ä¸­å¼•å…¥nodemailer"></a>1ã€åœ¨æ–‡ä»¶ä¸­å¼•å…¥nodemailer</h4><pre><code>    const nodemailer = require(&#39;nodemailer&#39;);

</code></pre><h4 id="2ã€åˆ›å»ºä¸€ä¸ªä¼ è¾“å¯¹è±¡"><a href="#2ã€åˆ›å»ºä¸€ä¸ªä¼ è¾“å¯¹è±¡" class="headerlink" title="2ã€åˆ›å»ºä¸€ä¸ªä¼ è¾“å¯¹è±¡"></a>2ã€åˆ›å»ºä¸€ä¸ªä¼ è¾“å¯¹è±¡</h4><pre><code>    let transporter = nodemailer.createTransport({
        host: &#39;smtp.163.com&#39;,
        port: 465,
        secure: true,
        auth: {
        user: &#39;username@163.com&#39;, //é‚®ç®±çš„è´¦å·
        pass: &#39;userpass&#39;//é‚®ç®±çš„å¯†ç 
        }
    });
</code></pre><h4 id="3ã€è®¾ç½®ç”µå­é‚®ä»¶"><a href="#3ã€è®¾ç½®ç”µå­é‚®ä»¶" class="headerlink" title="3ã€è®¾ç½®ç”µå­é‚®ä»¶"></a>3ã€è®¾ç½®ç”µå­é‚®ä»¶</h4><pre><code>    let mailOptions = {
        from: &#39;&quot;Fred Foo ğŸ‘»&quot; &lt;username@163.com&gt;&#39;, //é‚®ä»¶æ¥æº
        to: &#39;username@qq.com&#39;, //é‚®ä»¶å‘é€åˆ°å“ªé‡Œï¼Œå¤šä¸ªé‚®ç®±ä½¿ç”¨é€—å·éš”å¼€
        subject: &#39;Hello âœ”&#39;, // é‚®ä»¶ä¸»é¢˜
        text: &#39;Hello world ?&#39;, // å­˜æ–‡æœ¬ç±»å‹çš„é‚®ä»¶æ­£æ–‡
        html: &#39;&lt;b&gt;Hello world ?&lt;/b&gt;&#39; // htmlç±»å‹çš„é‚®ä»¶æ­£æ–‡
    };
</code></pre><h4 id="4ã€ä½¿ç”¨ç¬¬äºŒæ­¥å®šä¹‰çš„ä¼ è¾“å¯¹è±¡å‘é€é‚®ä»¶"><a href="#4ã€ä½¿ç”¨ç¬¬äºŒæ­¥å®šä¹‰çš„ä¼ è¾“å¯¹è±¡å‘é€é‚®ä»¶" class="headerlink" title="4ã€ä½¿ç”¨ç¬¬äºŒæ­¥å®šä¹‰çš„ä¼ è¾“å¯¹è±¡å‘é€é‚®ä»¶"></a>4ã€ä½¿ç”¨ç¬¬äºŒæ­¥å®šä¹‰çš„ä¼ è¾“å¯¹è±¡å‘é€é‚®ä»¶</h4><pre><code>    transporter.sendMail(mailOptions, (error, info) =&gt; {
        if (error) {
        return console.log(error);
        }
        console.log(&#39;Message %s sent: %s&#39;, info.messageId, info.response);
    });
</code></pre><h3 id="å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶"><a href="#å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶" class="headerlink" title="å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶"></a>å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶</h3><pre><code>    let mailOptions = {
        from: &#39;&quot;Fred Foo ğŸ‘»&quot; &lt;username@163.com&gt;&#39;, //é‚®ä»¶æ¥æº
        to: &#39;username@qq.com&#39;, //é‚®ä»¶å‘é€åˆ°å“ªé‡Œï¼Œå¤šä¸ªé‚®ç®±ä½¿ç”¨é€—å·éš”å¼€
        subject: &#39;Hello âœ”&#39;, // é‚®ä»¶ä¸»é¢˜
        html: &#39;&lt;b&gt;Hello world ?&lt;/b&gt;&#39;, // htmlç±»å‹çš„é‚®ä»¶æ­£æ–‡
        attachments: [ //é™„ä»¶æ•°ç»„
        {
            filename: &#39;text.txt&#39;,//é™„ä»¶åç§°
            path: &#39;./text.txt&#39;//é™„ä»¶çš„ä½ç½®
        }
        ]
    };

</code></pre><h3 id="å‘é€æ­£æ–‡ä¸­å¸¦æœ‰å›¾ç‰‡çš„é‚®ä»¶"><a href="#å‘é€æ­£æ–‡ä¸­å¸¦æœ‰å›¾ç‰‡çš„é‚®ä»¶" class="headerlink" title="å‘é€æ­£æ–‡ä¸­å¸¦æœ‰å›¾ç‰‡çš„é‚®ä»¶"></a>å‘é€æ­£æ–‡ä¸­å¸¦æœ‰å›¾ç‰‡çš„é‚®ä»¶</h3><blockquote><p>è®¾ç½®é‚®ä»¶çš„æ­£æ–‡çš„ç±»å‹ä¸ºhtmlç±»å‹,å›¾ç‰‡è¿˜æ˜¯æŒ‰ç…§é™„ä»¶çš„æ–¹å¼å‘é€ï¼Œåªä¸è¿‡æ¯”å‘é€é™„ä»¶å¤šäº†ä¸€ä¸ªcidï¼Œç„¶åå°†æ­£æ–‡å›¾ç‰‡çš„srcå€¼æŒ‡å‘attachmentså¯¹è±¡ä¸­çš„cidçš„å€¼å°±å¯ä»¥äº†ã€‚</p></blockquote><pre><code>    let mailOptions = {
        from: &#39;&quot;Fred Foo ğŸ‘»&quot; &lt;username@163.com&gt;&#39;, //é‚®ä»¶æ¥æº
        to: &#39;username@qq.com&#39;, //é‚®ä»¶å‘é€åˆ°å“ªé‡Œï¼Œå¤šä¸ªé‚®ç®±ä½¿ç”¨é€—å·éš”å¼€
        subject: &#39;Hello âœ”&#39;, // é‚®ä»¶ä¸»é¢˜
        html: &#39;&lt;b&gt;Hello world ?&lt;img src=&quot;cid:123456789&quot;/&gt;&lt;/b&gt;&#39;, // htmlç±»å‹çš„é‚®ä»¶æ­£æ–‡
        attachments: [
        {
            filename: &#39;a.jpg&#39;,//é™„ä»¶åç§°
            path: &#39;./a.jpg&#39;,//é™„ä»¶çš„ä½ç½®
            cid: &#39;123456789&#39; //ä¸ºé™„ä»¶æ·»åŠ ä¸€ä¸ªå¼•ç”¨åç§°
        }
        ]
    };

</code></pre><h2 id="é‚®ç®±æ£€éªŒçš„demo"><a href="#é‚®ç®±æ£€éªŒçš„demo" class="headerlink" title="é‚®ç®±æ£€éªŒçš„demo"></a>é‚®ç®±æ£€éªŒçš„demo</h2><p>çŸ¥é“äº†é‚®ç®±æ ¡éªŒçš„åŸç†å’ŒçŸ¥é“æ€ä¹ˆé€šè¿‡nodeæ¥å‘é€é‚®ä»¶ï¼Œä»£ç å…¶å®å°±ç®€å•å¤šäº†ï¼Œåšå®¢ä¸­å°±ä¸ç²˜è´´å…·ä½“çš„ä»£ç äº†ï¼Œå¦‚æœéœ€è¦ä»£ç è¯·åœ¨<a href="https://github.com/wuhuanhost/blog-demo" rel="external nofollow noopener noreferrer" target="_blank">node+expresså®ç°é‚®ç®±æ£€éªŒ</a>æŸ¥çœ‹ã€‚</p><h2 id="å¯†ç æ‰¾å›"><a href="#å¯†ç æ‰¾å›" class="headerlink" title="å¯†ç æ‰¾å›"></a>å¯†ç æ‰¾å›</h2><p>é‚®ç®±æ ¡éªŒå…¶å®æ˜¯ä¸ºäº†æ‰¾å›å¯†ç æœåŠ¡çš„ï¼Œè€Œä¸”ä»–ä»¬çš„åŸç†å…¶å®éƒ½å·®ä¸å¤šï¼šå¾ˆé•¿ä¸€æ®µæ—¶é—´å½“ä½ æ‰“å¼€ä¸€ä¸ªä»¥å‰æ³¨å†Œçš„ç½‘ç«™å»ç™»å½•çš„æ—¶å€™å‘ç°å¯†ç å¿˜è®°äº†ï¼Œç‚¹å‡»äº†å¯†ç æ‰¾å›åŠŸèƒ½ï¼Œç³»ç»Ÿä¼šæç¤ºè®©è¾“å…¥ä¸€ä¸ªæ³¨å†Œé‚®ç®±æˆ–è€…ç”¨æˆ·åï¼Œç„¶åä¼šå‘è¿™ä¸ªé‚®ç®±å‘é€ä¸€å°å¸¦æœ‰ç‰¹æ®Šé“¾æ¥çš„é‚®ä»¶ï¼Œè®©ä½ ç™»å½•é‚®ç®±å»éªŒè¯ï¼ŒæˆåŠŸç™»å½•é‚®ç®±å¹¶ä¸”ç‚¹å‡»è¿æ¥å°±ä¼šè·³è½¬åˆ°ä¸€ä¸ªé‡ç½®å¯†ç çš„é¡µé¢è®©ä½ ä¿®æ”¹å¯†ç ï¼Œä¿®æ”¹æˆåŠŸå°±å¯ä»¥é€šè¿‡æ–°å¯†ç ç™»å½•ç³»ç»Ÿäº†ã€‚ï¼ˆæ¸©é¦¨æç¤ºï¼šå¦‚æœæ‰¾å›å¯†ç çš„æ—¶å€™ç½‘ç«™ç›´æ¥æŠŠä½ ä»¥å‰çš„å¯†ç ç»™ä½ äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç½‘ç«™ç›¸å¯¹æ¥è¯´ä¸å®‰å…¨ï¼Œè°¨æ…ä½¿ç”¨ï¼ï¼‰</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†nodemailerçš„ä¸€äº›ç‰¹æ€§å’ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œä¸€äº›å‘é‚®ä»¶åœ¨å…·ä½“é¡¹ç›®ä¸­çš„åº”ç”¨ï¼Œé€šè¿‡nodemaileræˆ‘ä»¬ä¹Ÿå¯ä»¥å¿«é€Ÿçš„å¼€å‘ä¸€ä¸ªç®€å•çš„é‚®ä»¶å‘é€å®¢æˆ·ç«¯ã€‚</p><br><br><div id="appreciate-btn">æœ¬æ–‡å®Œ</div><br><blockquote style="border:.3em solid #eee;word-wrap:break-word;font-weight:700"><p style="text-align:left">æœ¬æ–‡å¦‚æœ‰è¯¯ï¼Œè¯·ä¸åèµæ•™ï¼</p><p style="text-align:left">åŸæ–‡æ ‡é¢˜ï¼š<a href="https://www.wuhuan.me/2017/06/20/node-post-mail/">Nodeå‘é€ç”µå­é‚®ä»¶</a></p><p style="text-align:left">åŸæ–‡é“¾æ¥ï¼š<a href="https://www.wuhuan.me/2017/06/20/node-post-mail/">https://www.wuhuan.me/2017/06/20/node-post-mail/</a></p><p style="text-align:left;color:grey">ç‰ˆæƒå£°æ˜ï¼šä¿ç•™ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™… | <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="external nofollow noopener noreferrer" target="_blank">Creative Commons BY-NC-ND 4.0</a></p></blockquote><ul class="pager"><li class="previous"><a href="/2017/07/20/node-receive-mail/" data-toggle="tooltip" data-placement="top" title="Nodeæ¥æ”¶ç”µå­é‚®ä»¶">&larr; Previous Post</a></li><li class="next"><a href="/2017/04/13/know-user-real-need/" data-toggle="tooltip" data-placement="top" title="ä½ ä»¥ä¸ºä½ çœŸç†è§£ç”¨æˆ·çš„éœ€æ±‚å—ï¼Ÿ">Next Post &rarr;</a></li></ul><br><div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more">&nbsp;åˆ†äº«åˆ°:</a> <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">&nbsp;qqç©ºé—´</a> <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">&nbsp;æ–°æµªå¾®åš</a> <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">&nbsp;è…¾è®¯å¾®åš</a> <a href="#" class="bds_douban" data-cmd="douban" title="åˆ†äº«åˆ°è±†ç“£">&nbsp;è±†ç“£</a> <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">&nbsp;å¾®ä¿¡</a> <a href="#" class="bds_sqq" data-cmd="sqq" title="åˆ†äº«åˆ°qq">&nbsp;qq</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8yOTY0NC82MjEy"><noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript></div></div><div class="hidden-xs col-sm-3 toc-col" id="catlog-content"><div class="toc-wrap"><p style="font-size:18px;color:#666;margin:0"><i class="fa fa-bookmark"></i> CATLOG</p><ol class="nav toc"><li class="nav toc-item nav toc-level-2"><a class="nav toc-link" href="#åˆ›å»ºæœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä½¿ç”¨çš„æ•°æ®åº“çš„è¡¨"><span class="nav toc-text">åˆ›å»ºæœ¬æ¬¡é‚®ç®±æ ¡éªŒdemoä½¿ç”¨çš„æ•°æ®åº“çš„è¡¨</span></a></li><li class="nav toc-item nav toc-level-2"><a class="nav toc-link" href="#nodemailderä»‹ç»åŠå…¶ä½¿ç”¨"><span class="nav toc-text">nodemailderä»‹ç»åŠå…¶ä½¿ç”¨</span></a><ol class="nav toc-child"><li class="nav toc-item nav toc-level-3"><a class="nav toc-link" href="#ç‰¹æ€§åˆ—è¡¨"><span class="nav toc-text">ç‰¹æ€§åˆ—è¡¨</span></a></li><li class="nav toc-item nav toc-level-3"><a class="nav toc-link" href="#nodemaileré…ç½®"><span class="nav toc-text">nodemaileré…ç½®</span></a></li><li class="nav toc-item nav toc-level-3"><a class="nav toc-link" href="#nodemailerä½¿ç”¨"><span class="nav toc-text">nodemailerä½¿ç”¨</span></a><ol class="nav toc-child"><li class="nav toc-item nav toc-level-4"><a class="nav toc-link" href="#1ã€åœ¨æ–‡ä»¶ä¸­å¼•å…¥nodemailer"><span class="nav toc-text">1ã€åœ¨æ–‡ä»¶ä¸­å¼•å…¥nodemailer</span></a></li><li class="nav toc-item nav toc-level-4"><a class="nav toc-link" href="#2ã€åˆ›å»ºä¸€ä¸ªä¼ è¾“å¯¹è±¡"><span class="nav toc-text">2ã€åˆ›å»ºä¸€ä¸ªä¼ è¾“å¯¹è±¡</span></a></li><li class="nav toc-item nav toc-level-4"><a class="nav toc-link" href="#3ã€è®¾ç½®ç”µå­é‚®ä»¶"><span class="nav toc-text">3ã€è®¾ç½®ç”µå­é‚®ä»¶</span></a></li><li class="nav toc-item nav toc-level-4"><a class="nav toc-link" href="#4ã€ä½¿ç”¨ç¬¬äºŒæ­¥å®šä¹‰çš„ä¼ è¾“å¯¹è±¡å‘é€é‚®ä»¶"><span class="nav toc-text">4ã€ä½¿ç”¨ç¬¬äºŒæ­¥å®šä¹‰çš„ä¼ è¾“å¯¹è±¡å‘é€é‚®ä»¶</span></a></li></ol></li><li class="nav toc-item nav toc-level-3"><a class="nav toc-link" href="#å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶"><span class="nav toc-text">å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶</span></a></li><li class="nav toc-item nav toc-level-3"><a class="nav toc-link" href="#å‘é€æ­£æ–‡ä¸­å¸¦æœ‰å›¾ç‰‡çš„é‚®ä»¶"><span class="nav toc-text">å‘é€æ­£æ–‡ä¸­å¸¦æœ‰å›¾ç‰‡çš„é‚®ä»¶</span></a></li></ol></li><li class="nav toc-item nav toc-level-2"><a class="nav toc-link" href="#é‚®ç®±æ£€éªŒçš„demo"><span class="nav toc-text">é‚®ç®±æ£€éªŒçš„demo</span></a></li><li class="nav toc-item nav toc-level-2"><a class="nav toc-link" href="#å¯†ç æ‰¾å›"><span class="nav toc-text">å¯†ç æ‰¾å›</span></a></li><li class="nav toc-item nav toc-level-2"><a class="nav toc-link" href="#åè®°"><span class="nav toc-text">åè®°</span></a></li></ol></div></div><div id="go-top" class="hidden-xs" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-angle-up"></i></div><div id="toggle-catlog" title="ç›®å½•"><i class="fa fa-bars"></i></div></div><div class="row" style="display:none"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><section><h5 class="text-center"><a href="/tags/">FEATURED TAGS</a></h5><div class="tags"><a class="tag" href="/tags/#nodemailer" title="nodemailer">nodemailer</a> <a class="tag" href="/tags/#ç”µå­é‚®ä»¶" title="ç”µå­é‚®ä»¶">ç”µå­é‚®ä»¶</a> <a class="tag" href="/tags/#node.js" title="node.js">node.js</a></div></section></div></div></div></article><script>$("#appreciate-btn").click(function(){$("#appreciate-content").toggle()});var catlogFlag=!1;$("#toggle-catlog").click(function(){catlogFlag?($("#catlog-content").show(),$(".post-container").removeClass("col-lg-offset-2"),$(".post-container").addClass("col-lg-offset-1"),catlogFlag=!1):($("#catlog-content").hide(),$(".post-container").removeClass("col-lg-offset-1"),$(".post-container").addClass("col-lg-offset-2"),catlogFlag=!0)}),$("#go-top").click(function(){$("html,body").animate({scrollTop:0},500)});var screenTopOffset=60;$(".post-container h1,.post-container h2,.post-container h3,.post-container h4,.post-container h5,.post-container h6").each(function(t,o){var c=$(this).find("a").text("#");$(c).attr("href","#link-"+t),$(this).find("a").remove(),$(this).append(c),$(this).find("a").click(function(){$("html,body").animate({scrollTop:$(this).offset().top-screenTopOffset},500)})}),$(window).width()>=1200&&$(".toc-link").each(function(t,o){$(this).click(function(){var o=$("a[href=#link-"+t+"]").offset().top;$("html,body").animate({scrollTop:o-60},500)})}),""===$(".toc-wrap").html()&&($(".toc-col").hide(),$(".post-container").removeClass("col-lg-offset-1"),$(".post-container").addClass("col-lg-offset-2"))</script><script src="/js/dayjs.min.js"></script><script>dayjs.locale("zh-cn"),dayjs.extend(dayjs_plugin_relativeTime);var postRelativeTime=dayjs("Tue Jun 20 2017 10:21:36 GMT+0800").fromNow();$("#post-relative-time").text(postRelativeTime.replace(" ",""))</script><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center"><br><ul class="list-inline text-center"><li><a target="_blank" class="weixin" title="å°å¨ç¬”è®°"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-weixin fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="http://weibo.com/1985520460" rel="external nofollow noopener noreferrer"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-weibo fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://github.com/wuhuanhost" rel="external nofollow noopener noreferrer"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://www.instagram.com/dreamer.wuhuan" rel="external nofollow noopener noreferrer"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted" style="line-height:24px"><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="external nofollow noopener noreferrer" target="_blank">Copyright</a> &copy; æ¢¦æƒ³.å®¶ 2018<br>Theme by <a href="https://haojen.github.io/" rel="external nofollow noopener noreferrer" target="_blank">Haojen Ma</a> Modified by <a href="http://www.wuhuan.me/">æ¢¦æƒ³.å®¶</a><br><span>Hosted by <a href="https://pages.coding.me" style="font-weight:200" rel="external nofollow noopener noreferrer" target="_blank">Coding Pages</a></span></p></div></div></div></footer><script>console.log("%c Welcome To My Blog!!! ","background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;")</script><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/blog.js"></script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>0!==$("#tag_cloud").length&&async("https://www.wuhuan.me/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",function(){var c=document.querySelector("nav");c&&FastClick.attach(c)})</script><script>$("article p>img").each(function(){var t=$(this).attr("alt");""==t&&(t="wuhuan.me",$(this).attr("alt",t)),$(this).attr("title",t),$(this).parent().css({"text-align":"center"}),$(this).parent().after("<p style='text-align:center;padding:0 1em;margin-top:-1em;'><span style='display:inline-block;border-bottom:1px solid #CCCCCC;font-style:italic;color:#999999;min-width:160px;'>&nbsp;"+t+"&nbsp;</span></p>")})</script><script src="/js/jquery.lazyload.js"></script><script type="text/javascript" charset="utf-8">$(function(){$("p>img,td>img").lazyload({effect:"fadeIn",threshold:200})})</script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script src="https://www.wuhuan.me/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><style>ul.search-result-list{padding-left:0;margin:0 5px 0 8px}p.search-result{border-bottom:1px dashed #ccc;padding:5px 0}a.search-result-title{font-weight:700}a.search-result{border-bottom:transparent;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-keyword{border-bottom:1px dashed #4088b8;font-weight:700}#local-search-result{height:90%;overflow:auto}.popup{display:none;position:fixed;top:10%;left:50%;width:700px;height:80%;margin-left:-350px;padding:3px 0 0 10px;background:#fff;color:#333;z-index:9999;border-radius:5px}@media (max-width:767px){.popup{padding:3px;top:0;left:0;margin:0;width:100%;height:100%;border-radius:0}}.popoverlay{position:fixed;width:100%;height:100%;top:0;left:0;z-index:2080;background-color:rgba(0,0,0,.3)}#local-search-input{margin-bottom:10px;width:50%}.popup-btn-close{position:absolute;top:6px;right:14px;color:#4ebd79;font-size:14px;font-weight:700;text-transform:uppercase;cursor:pointer}#no-result{position:absolute;left:44%;top:42%;color:#ccc}.busuanzi-count:before{content:" ";float:left;width:260px;min-height:25px}@media (min-width:768px) and (max-width:991px){.busuanzi-count{width:auto}.busuanzi-count:before{display:none}}@media (max-width:767px){.busuanzi-count{width:auto}.busuanzi-count:before{display:none}}.page-pv,.site-pv,.site-uv{display:inline-block}.page-pv .busuanzi-value,.site-pv .busuanzi-value,.site-uv .busuanzi-value{margin:0 5px}.site-uv{margin-right:10px}.site-uv::after{content:"|";padding-left:10px}.algolia-popup{overflow:hidden;padding:0}.algolia-popup .popup-btn-close{padding-left:15px;border-left:1px solid #eee;top:17px}.algolia-popup .popup-btn-close .fa{color:#999;font-size:18px}.algolia-popup .popup-btn-close:hover .fa{color:#222}.algolia-search{padding:8px 15px 10px;max-height:50px;border-bottom:1px solid #ccc;background:#f5f5f5;border-top-left-radius:5px;border-top-right-radius:5px}.algolia-search-input-icon{display:inline-block;width:20px}.algolia-search-input-icon .fa{font-size:18px}.algolia-search-input{display:inline-block;width:calc(90% - 20px)}.algolia-search-input input{padding:5px 0;width:100%;outline:0;border:none;background:0 0}.algolia-powered{float:right}.algolia-powered img{display:inline-block;height:18px;vertical-align:middle}.algolia-results{position:relative;overflow:auto;padding:10px 30px;height:calc(100% - 50px)}.algolia-results hr{margin:10px 0}.algolia-results .highlight,.algolia-results em{font-style:normal;margin:0;padding:0 2px;font-size:inherit;color:red;font-weight:700}.algolia-hits{margin-top:20px}.algolia-hit-item{margin:15px 0}.algolia-hit-item-link{display:block;border-bottom:1px dashed #ccc;transition-duration:.2s;transition-timing-function:ease-in-out;transition-delay:0s}.algolia-pagination .pagination{margin-top:40px;border-top:none;padding:0;display:block;text-align:center}.algolia-pagination .pagination-item{display:inline-block}.algolia-pagination .page-number{border-top:none}.algolia-pagination .page-number:hover{border-bottom:1px solid #222}.algolia-pagination .disabled-item{visibility:hidden}.pagination>li>a,.pagination>li>span{border:0;text-decoration:none}</style><div class="algolia-popup popup search-popup"><div class="algolia-search"><div class="algolia-search-input-icon"><i class="fa fa-search"></i></div><div class="algolia-search-input" id="algolia-search-input"></div></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><script src="//cdn.bootcss.com/instantsearch.js/1.5.1/instantsearch.min.js"></script><script type="text/javascript">$(document).ready(function(){var a={root:"/",algolia:{id:"0PURAMFJYA",tempstr:"63904ccf33bee6405c6535951941d040",indexName:"blog",hits:{per_page:10},labels:{input_placeholder:"æœç´¢...",hits_empty:"æœªå‘ç°ä¸ ã€Œ${query}ã€ç›¸å…³çš„å†…å®¹",hits_stats:"${hits} æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº† ${time} æ¯«ç§’"}}},i=a.algolia,e=i.id&&i.tempstr&&i.indexName;if(!e)return void window.console.error("Algolia Settings are invalid.");var t=instantsearch({appId:i.id,apiKey:i.tempstr,indexName:i.indexName,searchFunction:function(a){var i=$("#algolia-search-input").find("input");i.val()&&a.search()}});[instantsearch.widgets.searchBox({container:"#algolia-search-input",placeholder:i.labels.input_placeholder}),instantsearch.widgets.hits({container:"#algolia-hits",hitsPerPage:i.hits.per_page||10,templates:{item:function(i){var e=i.permalink?i.permalink:a.root+i.path;return'<a href="'+e+'" class="algolia-hit-item-link">'+i._highlightResult.title.value+"</a>"},empty:function(a){return'<div id="algolia-hits-empty">'+i.labels.hits_empty.replace(/\$\{query}/,a.query)+"</div>"}},cssClasses:{item:"algolia-hit-item"}}),instantsearch.widgets.stats({container:"#algolia-stats",templates:{body:function(e){var t=i.labels.hits_stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS);return t+'<span class="algolia-powered">  <img src="'+a.root+'images/algolia_logo.svg" alt="Algolia" /></span><hr />'}}}),instantsearch.widgets.pagination({container:"#algolia-pagination",scrollTo:!1,showFirstLast:!1,labels:{first:'<i class="fa fa-angle-double-left"></i>',last:'<i class="fa fa-angle-double-right"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",active:"current",disabled:"disabled-item"}})].forEach(t.addWidget,t),t.start(),$(".popup-trigger").on("click",function(a){a.stopPropagation(),$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle(),$("#algolia-search-input").find("input").focus()}),$(".popup-btn-close").click(function(){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")})})</script><script type="text/javascript">$(document).ready(function(){function e(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}if(0!==$("#local-search-input").size()){var t=!1,n="search.xml";0==n.length&&(n="search.xml");var a="/"+n,r=function(n,a,r){"use strict";$.ajax({url:n,dataType:"xml",async:!0,success:function(n){t=!0,$(".popup").detach().appendTo(".header-inner");var o=$("entry",n).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),i=document.getElementById(a),s=document.getElementById(r);i.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',n=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&o.forEach(function(a){var r=!0,o=a.title.trim().toLowerCase(),i=a.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=a.url,c=-1,l=-1,u=-1;if(""!=o&&""!=i&&n.forEach(function(e,t){c=o.indexOf(e),l=i.indexOf(e),0>c&&0>l?r=!1:(0>l&&(l=0),0==t&&(u=l))}),r){e+=1,t+="<li><a href='"+s+"' class='search-result-title'>"+o+"</a>";var p=a.content.trim().replace(/<[^>]+>/g,"");if(u>=0){var f=u-20,d=u+80;0>f&&(f=0),0==f&&(d=50),d>p.length&&(d=p.length);var h=p.substring(f,d);n.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+h+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==n&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),e()}})};$(".popup-trigger").mousedown(function(n){n.stopPropagation(),0==t?r(a,"local-search-input","local-search-result"):e()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})}})</script><script>with(window._bd_share_config={common:{bdSnsKey:{},bdText:"",bdMini:"2",bdMiniList:["weixin","qzone","tsina","tieba","douban","tqq","mshare","bdysc","renren","bdxc","kaixin001","tqf","bdhome","sqq","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","fbook","twi","linkedin","h163","evernotecn","copy","print"],bdPic:"",bdStyle:"1",bdSize:"24"},share:{}},document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]</script><script>$("body").prepend("<div id='progress-load' style='position:fixed;width:0px;height:2px;top:0;background-color:#337AB7;z-index:10000000;'></div>"),$(window).scroll(function(){var o=$(window).scrollTop(),e=$(document).height(),r=$(window).height();scrollPercent=o/(e-r)*100,scrollPercent=scrollPercent.toFixed(2),$("#progress-load").width(scrollPercent+"%")}).trigger("scroll")</script><script type="text/javascript">function addLink(){var e,n=document.getElementsByTagName("body")[0];e=window.getSelection();var t=e+"<br/>"+pagelink,a=document.createElement("div");a.style.position="absolute",a.style.left="-99999px",n.appendChild(a),a.innerHTML=t,e.selectAllChildren(a),window.setTimeout(function(){n.removeChild(a)},0)}var Sys={},ua=navigator.userAgent.toLowerCase(),pagelink="";pagelink+="<br/>",pagelink+="ä½œè€…:æ¢¦æƒ³.å®¶<br/>",pagelink=pagelink+"é“¾æ¥:"+document.location.href+"<br/>",pagelink+="æ¥æº:http://www.wuhuan.me<br/>",pagelink+="ç‰ˆæƒ:https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh<br/>",window.ActiveXObject?document.body.oncopy=function(){event.returnValue=!1;var e=document.selection.createRange().text;clipboardData.setData("Text",e+"<br/>"+pagelink)}:document.oncopy=addLink</script><script></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-52788998-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="/js/layer/layer.js"></script><script>$(".weixin").click(function(e){return e.stopPropagation(),e.preventDefault(),layer.open({type:1,title:!1,closeBtn:0,time:1e13,area:["240px","270px"],shadeClose:!0,content:'<div id="tong" class="layui-layer-wrap" style="display: block;"><img src="/images/weixin_qrcode.jpg" style="width:240px;height:240px;">\n	<p style="text-align:center;line-height:20px;margin:0;font-size:12px;">æ—¢ç„¶éƒ½ç‚¹å¼€äº†ï¼Œé‚£å°±æ‰«ä¸€ä¸‹å˜›ï¼</p></div>'}),!1})</script><script>$(document).keydown(function(o){if(81==o.keyCode){var p="none"===$(".algolia-popup").css("display")?!1:!0;p?$(".popup-btn-close").click():$(".popup-trigger").click()}})</script><img class="wechat-title-img" src="https://www.wuhuan.me/images/ava.jpg"></body></html>